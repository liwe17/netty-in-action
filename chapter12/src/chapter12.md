# WebSocket

- 主要内容
    - 实时Web的概念
    - WebSocket协议
    - 使用Netty构建一个基于WebSocket的聊天室服务器

- 实时Web利用技术和实践,使用户在信息的作者发布信息之后就能够立即收到信息,而不需要他们或者他们的软件周期性地检查信息源以获取更新

## WebSocket简介

- WebSocket协议是完全重新设计的协议,旨在为Web上的双向数据传输问题提供一个切实可行的解决方案,使得客户端和服务器之间可以在任意时刻传输消息,因此,这也就要求它们异步地处理消息回执

## WebSocket示例应用程序

- 通过使用WebSocket协议来实现一个基于浏览器的聊天应用程序,就像在Facebook的文本消息功能中见到过的那样

- 应用程序的逻辑
    - 客户端连接服务器,并且成为聊天的一部分
    - 通过WebSocket交换聊天消息
    - 双向发送消息
    - 服务器为所有客户端提供服务

## 添加WebSocket支持

- 在从标准的HTTP或者HTTPS协议切换到WebSocket时,将会使用一种称为升级握手的机制.升级动作发生的确切时刻特定于程序,可能在启动时,也可能是访问某个特定URL后
- 我们应用程序采用如下约定
    - 如果请求URL以/ws结尾,那么我们将会把该协议升级为WebSocket,否则采用基本的HTTP/HTTPS
    - 升级后所有的数据都将使用WebSocket传输

- 服务器逻辑
    - 聊天室客户端
    - 客户端发送HTTP请求(到标准的/或者位置为/ws的URL)
    - 聊天室服务器
        - 服务器响应到地址为/的URL的请求.其将传输index.html
        - 如果地址为/ws的URL被访问,那么服务器将会处理WebSocket升级
    - 协议升级完成后,服务器将会通过WebSocket发送消息

### 处理HTTP请求




















